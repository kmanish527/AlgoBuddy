chrome.action.onClicked.addListener(e=>{chrome.sidePanel.open({tabId:e.id})});chrome.runtime.onMessage.addListener((e,n,r)=>{if(e.message==="leetCodeProblemLoaded")chrome.alarms.clear("algoBuddyHintAlarm",()=>{chrome.storage.local.get(["hintTimerDuration"],i=>{const a=i.hintTimerDuration;a&&a>0&&(chrome.alarms.create("algoBuddyHintAlarm",{delayInMinutes:a}),console.log(`AlgoBuddy hint alarm set for ${a} minutes.`))})});else{if(e.message==="getTimerStatus")return chrome.alarms.get("algoBuddyHintAlarm",i=>{if(i){const a=i.scheduledTime-Date.now();r({remainingTime:a})}else r({remainingTime:0})}),!0;e.message==="cancelAlarm"&&chrome.alarms.clear("algoBuddyHintAlarm",()=>{console.log("AlgoBuddy alarm cancelled.")})}});chrome.alarms.onAlarm.addListener(e=>{e.name==="algoBuddyHintAlarm"&&chrome.tabs.query({active:!0,currentWindow:!0},n=>{if(n.length>0){const r=n[0].id;chrome.storage.session.set({triggerHintOnLoad:!0},()=>{chrome.sidePanel.open({tabId:r})})}})});
